 Made a lot of change to use it for ElDoc
