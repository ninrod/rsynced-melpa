Use frames instead of windows whenever display-buffer is called.
